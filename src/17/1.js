const input = ['>','>','>','>','<','<','<','<','>','>','>','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','>','<','>','<','>','<','>','<','<','<','<','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','>','<','<','>','<','<','>','>','>','>','<','<','>','>','>','>','<','>','<','<','>','>','>','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','<','<','<','<','>','>','<','<','>','>','>','<','>','>','>','>','<','>','>','>','<','<','>','>','>','<','<','<','<','>','>','>','<','>','>','<','<','<','>','<','>','>','>','<','>','>','>','>','<','>','<','<','<','<','>','>','>','<','<','>','>','>','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','>','>','<','<','>','>','>','>','<','<','>','<','>','>','>','>','<','<','>','>','<','<','>','<','>','>','>','<','>','>','>','<','<','<','<','>','<','<','>','>','<','<','<','>','>','<','<','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','>','>','<','<','<','>','<','<','<','<','>','>','>','<','>','>','<','<','<','>','>','>','>','<','>','<','<','<','<','>','>','<','<','>','<','<','>','>','>','>','<','<','>','>','<','<','>','<','<','>','>','>','<','>','<','<','<','>','<','<','>','>','<','>','<','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','>','>','<','<','>','>','>','>','<','>','>','>','<','<','>','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','<','>','>','<','<','<','>','<','<','<','<','>','<','>','<','<','<','>','>','<','<','>','<','>','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','>','>','>','>','<','>','>','>','<','<','>','<','<','<','>','<','<','<','<','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','>','<','>','>','<','>','>','>','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','<','<','<','<','>','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','>','<','<','>','>','>','<','<','>','<','>','>','>','<','>','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','>','>','>','<','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','>','>','>','>','<','<','<','<','>','<','<','<','<','>','>','<','<','<','>','<','<','<','<','>','>','<','>','>','<','<','>','<','<','<','<','>','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','>','>','>','<','<','<','>','<','<','>','<','<','>','>','<','<','<','<','>','>','<','<','>','>','<','<','>','<','<','<','>','<','<','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','<','<','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','>','>','>','>','<','<','<','>','>','>','>','<','>','>','<','<','<','<','>','>','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','<','>','<','<','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','>','<','<','<','<','>','>','>','<','>','>','<','>','>','>','<','<','<','<','>','>','>','<','>','>','<','<','<','<','>','>','>','>','<','>','>','<','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','>','<','>','>','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','>','>','<','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','<','>','<','<','>','>','<','<','>','>','>','>','<','<','<','>','<','<','>','>','>','<','>','>','<','>','>','<','<','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','<','>','<','<','<','>','>','>','>','<','<','>','<','>','<','>','>','>','>','<','>','>','<','<','>','>','<','<','>','>','<','<','>','>','<','<','>','>','<','>','>','>','>','<','<','>','>','>','<','<','<','<','>','<','>','<','<','>','<','<','>','>','<','<','>','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','<','>','>','>','<','>','>','>','<','>','<','<','<','<','>','<','>','<','>','>','>','>','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','>','>','>','<','<','<','<','>','>','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','<','<','<','<','>','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','>','>','<','>','<','<','<','<','>','>','>','<','>','>','>','>','<','<','>','>','>','<','<','>','>','>','<','<','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','<','<','>','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','<','>','>','>','>','<','>','>','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','>','>','<','<','<','<','>','>','>','<','<','>','>','<','<','<','>','>','<','<','>','<','>','>','<','<','>','>','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','>','>','<','<','>','>','<','<','>','>','<','<','>','>','<','>','>','<','<','>','<','<','>','>','>','>','<','<','>','>','>','<','>','>','>','<','>','>','>','>','<','<','<','>','>','<','<','>','<','<','<','>','<','>','>','>','<','<','<','>','<','>','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','>','<','<','<','<','>','>','<','<','<','<','>','<','<','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','<','<','<','>','<','>','>','>','<','<','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','<','>','<','<','>','>','<','<','>','>','>','<','<','>','>','>','>','<','<','>','>','<','<','>','<','<','<','<','>','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','<','<','<','>','>','>','<','<','>','>','<','>','<','<','<','>','>','>','>','<','<','<','<','>','<','<','<','>','>','>','>','<','>','<','<','>','>','>','<','>','>','<','<','>','>','<','>','>','<','>','>','>','>','<','>','<','<','<','>','<','>','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','>','<','<','<','<','>','>','>','>','<','<','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','<','<','<','>','>','<','<','<','>','>','<','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','<','>','>','>','>','<','<','>','<','>','>','>','>','<','<','<','>','>','>','<','>','>','>','>','<','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','>','>','<','<','<','>','<','<','<','>','>','>','>','<','<','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','>','<','<','>','>','<','>','>','<','<','<','>','>','<','>','>','>','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','>','>','>','>','<','<','<','>','<','>','>','<','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','>','<','>','>','>','<','<','<','<','>','>','>','<','>','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','<','>','<','<','<','>','<','<','<','<','>','>','>','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','<','>','>','>','>','<','>','<','<','<','<','>','>','<','<','>','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','>','>','>','>','<','<','<','<','>','<','<','<','<','>','<','<','<','<','>','<','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','>','>','<','>','>','<','<','>','>','>','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','>','>','>','<','<','<','<','>','>','>','>','<','>','<','<','<','>','<','<','>','<','<','>','>','<','<','<','<','>','<','<','>','>','>','<','<','>','>','>','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','>','>','>','>','<','<','<','>','>','<','<','>','>','>','<','>','>','<','<','>','>','>','>','<','<','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','<','<','<','>','<','<','<','>','<','<','<','>','>','>','>','<','<','>','>','<','<','<','<','>','>','>','>','<','>','>','<','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','<','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','<','<','>','>','<','<','<','>','>','<','<','>','>','<','<','<','<','>','>','>','>','<','>','>','<','<','<','<','>','>','>','<','>','<','<','>','>','>','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','>','<','<','>','>','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','<','>','<','<','<','>','<','>','>','>','<','<','<','>','>','>','<','<','>','>','>','<','<','>','<','<','>','<','>','>','>','<','<','<','>','>','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','>','>','>','<','>','>','<','>','>','>','<','>','>','>','<','>','>','<','<','>','>','>','<','<','>','<','<','<','>','>','>','<','>','>','>','<','<','>','>','<','<','<','<','>','>','<','>','>','>','>','<','<','<','>','<','>','<','<','<','<','>','>','>','>','<','<','<','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','>','>','<','>','>','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','<','<','<','<','>','>','<','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','<','>','<','<','<','>','>','>','<','<','>','>','<','<','>','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','>','>','>','<','<','<','<','>','<','<','<','>','>','<','<','<','>','>','>','<','<','>','>','>','<','<','<','<','>','>','>','<','>','<','<','>','>','>','<','<','<','<','>','<','<','>','<','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','>','<','<','>','>','>','<','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','>','>','<','<','>','>','>','>','<','<','<','>','<','<','>','>','>','<','<','>','<','<','<','>','>','>','>','<','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','<','>','<','<','<','<','>','>','<','<','>','<','>','>','<','<','<','<','>','>','>','<','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','>','>','<','<','>','>','>','>','<','<','<','>','<','>','>','>','>','<','<','<','>','<','<','<','<','>','<','>','>','>','>','<','<','>','>','>','<','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','<','<','>','>','>','<','>','>','<','<','>','>','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','<','>','>','>','<','<','>','>','>','<','>','>','>','<','<','<','>','<','>','<','<','<','>','>','>','<','<','>','>','<','<','>','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','>','<','<','>','<','>','>','>','>','<','<','>','>','<','>','>','>','<','<','>','>','<','>','>','<','<','<','>','>','>','>','<','>','>','>','<','<','<','<','>','>','>','<','>','>','>','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','>','<','<','<','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','>','<','>','<','<','>','<','<','<','<','>','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','<','>','>','<','>','>','>','<','>','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','>','>','>','<','>','<','<','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','<','<','<','>','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','>','>','>','<','<','<','>','>','<','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','>','<','<','>','<','>','<','<','>','>','<','<','>','<','>','>','<','<','<','>','>','>','>','<','<','>','<','<','<','>','>','<','<','>','>','>','<','<','>','<','<','>','>','<','<','<','>','>','>','<','<','>','<','<','<','>','<','<','<','>','>','<','<','>','<','>','>','>','>','<','>','<','<','<','<','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','>','<','<','<','>','>','<','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','>','>','>','<','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','<','<','<','>','<','<','>','>','>','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','<','>','>','<','>','>','>','<','>','<','<','>','<','<','>','<','>','>','>','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','<','<','>','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','<','<','>','>','>','<','<','<','<','>','<','>','<','<','<','<','>','<','<','>','<','<','<','<','>','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','>','<','>','>','<','<','<','<','>','>','<','>','>','>','>','<','>','>','>','>','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','>','>','<','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','<','<','<','<','>','<','<','<','>','<','<','>','<','<','>','>','>','>','<','<','>','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','>','<','>','>','>','>','<','<','<','>','>','<','<','<','>','>','>','>','<','<','>','<','<','>','<','<','<','>','>','<','>','>','<','<','>','>','>','<','<','>','>','<','<','>','>','<','>','>','>','<','<','<','>','<','>','<','<','<','<','>','>','<','>','>','<','>','>','<','>','>','>','<','<','<','>','>','>','<','<','<','>','<','<','<','>','>','<','<','>','>','>','>','<','>','<','<','>','>','>','>','<','<','>','>','>','>','<','>','<','<','<','>','<','<','>','>','<','<','<','>','<','>','>','>','<','>','>','>','<','>','<','<','>','>','<','>','>','>','<','>','<','<','>','>','<','<','<','<','>','>','<','<','>','>','>','>','<','>','>','>','<','<','<','>','<','>','>','>','>','<','>','>','>','>','<','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','<','>','<','<','>','>','>','>','<','<','<','<','>','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','<','>','>','>','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','<','>','>','<','<','<','>','<','<','>','>','>','>','<','<','<','>','>','<','>','<','<','<','<','>','>','<','>','<','<','>','>','>','<','>','>','>','>','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','<','<','<','<','>','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','>','>','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','>','<','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','<','>','>','>','<','<','<','>','>','>','<','<','>','<','<','<','<','>','<','<','>','>','>','<','>','>','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','>','<','<','>','>','>','<','<','>','>','>','<','<','<','<','>','<','<','>','>','>','<','<','<','>','>','<','<','>','<','<','<','>','>','>','<','<','<','>','>','>','<','>','<','<','<','<','>','>','<','<','>','>','>','>','<','>','>','>','<','<','>','<','<','<','>','>','>','>','<','<','>','<','<','>','>','>','>','<','<','<','<','>','>','<','>','<','<','<','>','>','>','>','<','<','>','>','<','>','>','>','<','<','<','<','>','<','>','>','<','<','<','>','<','<','>','>','>','<','<','<','>','<','<','<','>','>','>','<','>','>','>','>','<','<','<','>','>','<','>','>','>','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','<','>','>','>','<','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','>','<','<','<','<','>','>','<','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','>','<','<','<','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','<','<','<','>','>','>','<','<','<','>','<','>','>','>','<','<','>','<','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','<','>','<','<','<','>','<','<','>','<','<','<','<','>','<','<','<','>','<','<','>','>','>','>','<','>','>','<','<','<','>','<','<','<','<','>','>','<','>','>','<','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','<','>','>','>','<','>','>','<','>','<','>','>','<','<','<','<','>','>','<','>','<','<','<','>','<','<','>','<','>','>','>','>','<','<','>','>','>','<','<','<','<','>','>','>','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','<','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','<','>','<','>','>','>','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','>','>','<','>','>','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','<','<','<','>','>','>','>','<','<','>','>','>','<','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','>','>','>','>','<','<','>','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','<','>','<','>','>','<','<','>','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','<','>','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','>','<','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','>','<','<','>','>','<','<','>','<','>','<','<','<','<','>','>','>','<','<','>','<','<','<','>','>','<','>','>','>','<','<','>','>','>','<','<','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','>','>','<','<','<','>','<','<','<','>','<','<','<','<','>','>','<','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','>','<','<','<','>','<','>','>','>','>','<','<','>','<','<','<','>','>','>','<','<','>','<','>','>','<','<','>','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','<','>','>','<','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','<','<','>','>','>','>','<','<','>','>','<','<','<','<','>','>','<','>','>','>','>','<','>','<','<','>','>','>','<','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','<','<','>','>','<','<','<','<','>','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','>','<','<','<','<','>','<','<','<','>','<','<','<','<','>','>','>','>','<','>','>','>','<','>','>','>','<','<','<','<','>','>','>','>','<','<','>','<','<','<','<','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','>','>','>','>','<','>','>','<','<','>','>','>','>','<','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','>','>','>','<','<','<','<','>','>','>','<','>','>','>','<','<','<','<','>','<','<','>','>','>','<','>','>','>','<','>','>','<','<','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','>','>','<','<','<','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','<','<','>','>','>','<','>','<','>','<','>','<','>','>','>','>','<','>','>','>','>','<','<','>','<','>','<','<','>','>','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','>','>','<','<','<','<','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','>','<','<','<','<','>','>','>','<','>','>','<','<','>','<','>','>','<','>','>','>','>','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','>','<','>','>','<','<','>','<','>','>','>','<','<','<','>','>','>','>','<','>','<','>','>','>','>','<','>','<','<','<','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','>','<','<','>','>','<','<','<','>','>','<','<','<','<','>','>','>','<','<','>','>','>','<','<','>','>','<','>','>','>','<','>','>','<','<','<','>','>','>','>','<','<','<','>','<','<','<','<','>','>','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','>','>','<','<','<','>','>','>','<','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','<','<','<','<','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','<','<','>','>','>','>','<','<','<','>','<','<','<','<','>','>','<','<','<','>','>','>','<','>','>','>','<','>','<','<','<','>','>','>','<','<','>','>','>','<','<','>','>','<','<','<','<','>','>','>','<','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','>','>','>','<','<','>','>','>','<','>','>','<','>','>','>','<','<','<','>','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','>','>','<','<','<','>','>','<','<','<','>','>','<','>','<','<','<','<','>','>','>','<','>','>','>','<','<','>','>','<','<','>','>','<','>','>','>','<','<','>','>','>','>','<','>','>','<','>','>','>','>','<','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','<','<','>','>','<','<','>','>','>','>','<','<','<','>','>','<','<','>','>','<','<','<','>','<','<','<','>','>','>','<','>','>','<','<','<','>','>','>','>','<','<','>','>','<','>','>','>','>','<','<','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','<','<','>','>','>','<','<','<','>','>','>','<','>','>','>','>','<','<','<','>','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','<','>','>','<','<','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','>','>','<','<','<','>','>','>','<','<','<','>','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','<','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','>','<','<','>','>','>','<','<','>','>','>','<','>','>','<','>','<','<','<','>','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','<','>','>','>','<','<','<','>','>','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','<','<','<','<','>','>','<','<','>','>','>','>','<','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','<','>','<','>','<','<','<','<','>','<','<','<','>','>','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','>','>','>','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','<','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','>','>','<','>','>','<','<','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','<','>','<','<','>','>','<','<','<','<','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','<','>','<','<','>','>','>','>','<','<','>','>','>','>','<','<','<','>','<','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','>','>','>','<','>','>','>','>','<','>','<','>','>','>','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','>','<','<','<','<','>','>','>','>','<','>','>','>','<','>','>','>','>','<','>','>','<','<','>','<','<','<','<','>','<','<','>','>','>','>','<','>','>','<','<','<','<','>','<','>','>','>','<','<','<','>','>','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','>','>','>','>','<','>','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','>','<','<','<','<','>','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','>','>','>','>','<','>','>','<','<','<','>','>','>','<','<','<','>','<','>','>','>','<','<','<','>','<','>','>','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','<','<','>','>','<','>','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','>','>','<','<','<','<','>','>','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','<','>','>','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','>','<','<','<','<','>','<','<','>','>','<','<','<','<','>','>','<','<','<','<','>','<','<','>','>','<','>','>','>','>','<','<','<','>','>','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','<','>','<','<','>','<','<','>','<','<','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','<','<','>','<','<','>','<','>','>','<','<','<','>','>','>','<','<','<','>','<','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','>','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','<','>','>','<','<','<','>','>','<','<','>','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','>','<','>','>','>','>','<','<','<','<','>','>','<','<','>','>','<','<','<','>','>','<','<','<','>','<','<','>','>','>','<','<','>','>','<','>','>','<','>','>','<','<','<','>','>','>','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','>','>','<','>','<','<','<','<','>','>','<','<','>','>','<','<','>','>','>','<','>','>','<','>','>','>','>','<','<','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','<','<','<','>','>','<','<','>','>','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','<','<','>','>','<','<','>','<','<','<','>','<','>','>','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','>','>','>','>','<','>','<','<','>','<','<','>','>','>','<','<','<','>','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','>','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','>','>','<','<','<','>','<','<','<','>','>','<','>','>','>','<','<','>','>','<','<','<','<','>','<','>','<','<','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','<','<','>','>','>','>','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','<','<','>','<','>','>','>','>','<','>','<','<','>','<','>','>','>','<','>','>','>','>','<','>','<','<','>','<','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','<','>','>','<','<','<','>','>','<','<','>','<','<','>','>','<','<','<','>','>','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','<','<','<','>','>','<','>','>','>','>','<','<','<','>','<','>','>','>','<','>','>','>','<','<','<','<','>','<','<','>','>','>','<','>','<','<','<','<','>','>','>','>','<','<','<','>','>','<','>','>','>','>','<','<','>','>','<','<','<','<','>','<','<','<','<','>','>','>','<','>','<','<','>','>','<','<','<','>','<','>','>','>','>','<','<','>','>','>','>','<','<','>','>','<','<','<','<','>','<','>','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','>','>','>','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','<','>','<','>','>','<','<','<','<','>','>','>','<','<','>','<','>','>','>','<','>','<','<','<','>','<','<','>','>','>','>','<','<','<','>','<','<','<','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','<','>','<','>','>','>','>','<','>','>','>','<','>','>','>','>','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','<','>','<','<','<','>','>','>','>','<','>','<','<','>','>','>','>','<','<','<','>','<','>','>','>','>','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','>','<','>','>','<','<','<','>','>','>','<','<','<','<','>','<','>','>','>','<','>','>','>','>','<','<','>','<','<','<','<','>','<','>','>','>','<','<','>','>','>','<','<','>','>','>','<','<','>','<','<','<','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','<','>','>','>','<','<','<','>','>','>','>','<','>','>','<','<','>','>','>','<','<','<','<','>','<','<','<','>','>','>','<','>','>','<','<','<','>','<','>','>','<','<','<','<','>','>','<','>','<','>','>','>','<','<','<','>','>','>','<','<','>','>','<','<','<','<','>','>','<','<','>','>','>','>','<','<','<','<','>','<','<','<','>','>','<','<','>','<','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','>','<','>','>','<','<','<','<','>','>','<','<','<','>','<','>','>','>','<','<','<','>','<','<','<','<','>','<','<','>','>','<','>','<','<','<','<','>','>','<','<','<','>','<','<','>','>','>','<','<','>','<','<','<','>','<','<','<','>','<','<','<','>','>','<','<','<','>','>','>','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','<','>','>','<','>','>','>','>','<','<','<','>','>','<','>','>','>','>','<','<','<','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','<','<','>','<','<','<','<','>','>','>','>','<','<','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','<','>','>','>','<','<','<','>','>','>','<','<','<','>','<','<','>','>','>','<','>','<','<','<','>','>','<','<','>','<','>','<','>','>','<','>','>','<','<','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','>','>','>','<','>','>','>','>','<','<','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','<','<','<','>','<','>','>','>','>','<','<','>','<','>','>','>','<','>','<','<','<','<','>','>','>','>','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','<','>','>','>','>','<','<','>','>','>','<','<','>','>','<','>','>','<','<','<','>','>','>','<','<','<','<','>','<','<','>','>','>','>','<','<','>','>','>','>','<','<','<','>','>','<','>','>','<','<','>','>','>','>','<','<','<','<','>','<','<','<','>','>','>','>','<','<','>','<','<','<','<','>','>','>','>','<','>','>','<','<','<','<','>','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','>','<','>','<','>','>','>','>','<','<','>','>','>','>','<','<','<','>','>','>','<','<','>','>','<','<','>','>','>','<','>','>','>','<','<','<','>','<','>','>','<','>','>','>','<','<','<','<','>','<','>','>','>','>','<','<','<','<','>','<','<','<','<','>','>','<','<','>','>','>','>','<','<','>','>','>','<','<','<','<','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','<','<','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','>','>','<','<','<','>','<','<','<','>','<','<','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','>','>','<','>','>','<','<','>','>','<','>','<','<','<','>','>','>','<','<','>','>','>','<','<','<','>','<','<','>','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','<','<','<','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','<','>','>','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','>','<','<','<','<','>','>','<','<','<','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','>','<','<','>','>','<','>','>','>','>','<','<','<','<','>','<','<','>','>','<','<','<','<','>','<','<','<','<','>','>','<','>','>','>','<','<','<','>','>','<','<','<','>','>','<','<','<','<','>','<','<','<','<','>','>','>','<','<','<','>','>','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','>','<','<','<','<','>','<','<','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','>','>','<','<','<','>','>','>','<','<','>','<','>','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','>','>','>','<','>','>','>','>','<','<','<','>','>','>','<','<','>','>','<','>','>','>','>','<','<','<','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','>','>','>','>','<','>','>','>','<','<','<','<','>','>','>','<','<','<','>','>','>','<','<','>','>','<','>','>','>','<','<','<','>','>','<','<','<','<','>','<','<','<','>','>','>','<','<','>','>','>','>','<','>','<','<','<','<','>','<','>','>','<','<','>','>','>','<','<','<','<','>','>','<','>','>','>','<','<','>','>','>','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','>','<','<','>','<','>','>','<','<','<','<','>','>','>','<','>','>','<','<','>','>','<','<','<','<','>','<','<','>','>','>','>','<','<','>','>','<','>','<','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','>','<','<','<','>','<','>','>','>','>','<','<','>','<','<','>','<','>','>','>','<','>','<','>','>','>','>','<','<','<','>','<','<','>','>','>','>','<','<','<','<','>','>','<','<','<','<','>','<','<','<','<','>','<','<','<','>','>','<','<','>','>','<','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','>','<','>','>','>','<','>','>','>','>','<','>','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','>','>','<','<','>','<','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','>','>','<','<','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','<','>','>','>','>','<','>','>','<','>','<','<','<','>','>','>','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','<','>','>','>','<','<','<','>','<','<','<','>','>','>','<','<','>','>','>','>','<','>','<','>','>','>','<','<','<','<','>','<','<','>','>','<','>','>','>','>','<','<','>','>','<','>','>','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','>','>','<','<','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','>','>','>','<','>','>','>','<','<','<','>','>','<','>','>','>','<','>','<','<','<','>','>','<','<','>','<','<','<','<','>','>','>','>','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','>','<','<','<','<','>','<','<','>','>','<','<','<','>','<','<','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','<','>','>','<','<','>','>','>','>','<','>','>','<','<','<','>','<','<','>','>','<','<','<','<','>','>','<','<','<','>','>','<','<','>','>','>','<','>','>','>','<','<','<','>','>','>','>','<','>','>','>','>','<','<','<','<','>','>','<','>','>','>','<','>','<','>','>','>','<','<','<','>','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','<','<','>','>','>','>','<','>','>','<','<','<','<','>','>','<','>','>','>','>','<','<','>','<','<','<','>','<','<','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','<','>','>','>','<','>','>','<','>','>','<','<','<','>','<','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','<','>','>','>','<','<','>','>','>','>','<','<','<','<','>','<','<','<','>','>','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','>','>','>','<','<','>','<','<','<','>','<','>','>','>','<','>','>','>','<','<','<','>','>','>','<','<','<','>','>','>','<','<','<','<','>','<','<','<','<','>','>','<','<','<','>','>','>','>','<','<','<','>','>','<','<','<','>','>','>','>','<','>','<','>','>','>','>','<','<','<','>','>','>','>','<','<','<','>','>','>','>','<','>','>','<','<'];

// const input = ['>','>','>','<','<','>','<','>','>','<','<','<','>','>','<','>','>','>','<','<','<','>','>','>','<','<','<','>','<','<','<','>','>','<','>','>','<','<','>','>'];

const shapes = {
    '-': [['#','#','#','#']],
    '+': [
        ['.','#','.'],
        ['#','#','#'],
        ['.','#','.'],
    ],
    'L': [
        ['.','.','#'],
        ['.','.','#'],
        ['#','#','#'],
    ],
    'I': [
        ['#'],
        ['#'],
        ['#'],
        ['#'],
    ],
    'O': [
        ['#','#'],
        ['#','#'],
    ],
};

const order = ['-','+','L','I','O'];

const chamber = [
    ['.','.','.','.','.','.','.'],
    ['.','.','.','.','.','.','.'],
    ['.','.','.','.','.','.','.'],
    ['.','.','.','.','.','.','.'],
    ['.','.','.','.','.','.','.'],
    ['.','.','.','.','.','.','.'],
    ['.','.','.','.','.','.','.'],
];

let height = 0;
let curRock = 0;
let curWind = 0;

const storeShape = (shape, left, bottom) => {
    let row = bottom;
    for (let i = shape.length - 1; i >= 0; i--){
        for (let j = 0; j < shape[i].length; j++){
            if (shape[i][j] === '#') chamber[chamber.length - row - 1][left + j] = shape[i][j];
        }
        row++;
    }
};

const drawChamber = () => {
    const lines = [];
    for (const c of chamber){
        lines.push(c.join(''));
    }
    for (const line of lines) console.log(line);
}

const checkCollision = (isLeft = true, shape, left, bottom) => {
    if (isLeft){
        if (left === 0) return left;
        let row = bottom;
        for (let i = shape.length - 1; i >= 0; i--){
            for (let j = 0; j < shape[i].length; j++){
                const current = shape[i][j];
                const next = chamber[chamber.length - row - 1][left + j - 1];
                if (current === '#' && next === '#') return left;
            }
            row++;
        }
        return left - 1;
    } else {
        if (left + shape[0].length >= chamber[0].length) return left;
        let row = bottom;
        for (let i = shape.length - 1; i >= 0; i--){
            for (let j = 0; j < shape[i].length; j++){
                const current = shape[i][j];
                const next = chamber[chamber.length - row - 1][left + j + 1];
                if (current === '#' && next === '#') return left;
            }
            row++;
        }
        return left + 1;
    }
};

const simulateRock = () => {
    let canMove = true;
    const shape = shapes[order[curRock]];
    const shapeWidth = shape[0].length;
    const shapeHeight = shape.length;

    let bottom = height + 4;
    let left = 2;
    // add empty rows to fit our shapes
    if (bottom + 5 > chamber.length){
        for (let i=0;i<(bottom + 5) - chamber.length;i++) chamber.unshift(['.','.','.','.','.','.','.']);
    }

    while (canMove){
        bottom--;
        // apply wind
        if (input[curWind] === '<'){
            // left
            left = checkCollision(true, shape, left, bottom);
        } else {
            // right
            left = checkCollision(false, shape, left, bottom);
        }
        // are we at the bottom?
        if (bottom === 0){
            canMove = false;
            storeShape(shape, left, bottom);
        } else {
            // check down of each row
            for (let i=0;i<shapeWidth;i++){
                if (shape[shape.length-1][i] === '#' && chamber[chamber.length - bottom][left + i] === '#'){
                    canMove = false;
                    storeShape(shape, left, bottom);
                    break;
                } else if (shape.length > 1 && shape[shape.length-2][i] === '#' && chamber[chamber.length - bottom - 1][left + i] === '#'){
                    canMove = false;
                    storeShape(shape, left, bottom);
                    break;
                } else if (bottom === 0){
                    canMove = false;
                    storeShape(shape, left, bottom);
                    break;
                }
            }
        }
        curWind = (curWind + 1) % input.length;
    }
    height = Math.max(height, bottom + shapeHeight);
    curRock = (curRock + 1) % order.length;
};

for (let i=0;i<2022;i++){
    simulateRock();
}

drawChamber();
console.log(height);